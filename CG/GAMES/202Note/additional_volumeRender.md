# [volume rendering techniques](https://developer.nvidia.com/gpugems/gpugems/part-vi-beyond-triangles/chapter-39-volume-rendering-techniques)

## 第一节: 介绍

自然界许多视觉效果是体积的. 流体, 云, 火, 烟雾和灰尘难以用几何片元建模. 这些效果更加适合用体积建模. 这些模型假定光线被大量的体中的例子发射, 吸收和散射.

除了建模和渲染体积现象, 体素渲染也是提供3d数据集可视化的科学和工程软件的基础.例如，医学成像设备获取的数据或计算流体动力学模拟结果的数据的可视化。交互式体素渲染应用的用户依赖现代图形加速器的性能进行高效的数据探索和特征发现.

本章描述了利用可伸缩的编程模型和现代GPU三维纹理能力进行体素渲染. 尽管可以在GPU上使用其他受欢迎的体素渲染算法, 比如光线追踪, 本章仍只描述基于贴图的体素渲染. 基于贴图的技术易于和多边形算法结合, 只需要少量的render pass, 并且在不牺牲渲染质量的前提下提供了高水平的交互性. 

第二节介绍了专业术语, 并解释了直接体素渲染的流程. 第三节描述了一个经典的基于纹理体素渲染应用的组成部分, 并用一个简单的例子阐明.第四节提供了附加的实现细节, 可以提高基础体素渲染的能力. 第五节描述了在渲染中加入更真实的光照效果和添加程序细节的高级技术.第六节总结了一些有关性能的考量.

## 第二节: volume rendering

直接体素渲染方法生成3d体素数据集的图像们, 不需要显式的提取数据的几何表面.  这些技术使用光学模型将数据值映射到光学属性, 比如颜色和透明度. 在渲染时, 光学属性沿着每一条观察涉嫌积累, 形成数据的图像.

尽管数据集被解释为空间连续的函数, 出于实际的考量, 它用均匀的采样的3d数组表示. 在图形内存中, 体素数据存储为一堆2d贴图片段, 或一个3d贴图对象. 名词 **体素(voxel)** 指一个独立的体元素, 类似于术语 像素(pixel)指代贴图元素. 每个体素和数据空间的一个位置对应, 并且有一个或多个数据值和它有联系. 在位置中间的值通过临近体素数据的插值得到.这个流程被称为重建, 在体渲染和处理应用中扮演了重要的角色.

本质来说, 光学模型的角色是描述体中的粒子如何和光线交互. 例如, 最常用的模型假设体中的粒子同时发射和吸收光线. 更复杂的模型包含了局部光照和体阴影, 并且解释了光的散射效果.光学参数由数据值直接指定, 或者由一个或多个转换函数从数据中计算得到. 一般来说, 转换函数由纹理查找表(texture lookup tables)实现, 一些简单的函数也可以在片段着色器中计算. 

图像是通过沿着所有的观察射线取样并积累产生的光学特性来创建的



## 第三节: 基于贴图的体渲染

一般来说, 基于贴图的体渲染算法可以分为三个阶段: 初始化, 更新和绘制. 初始化阶段通常只执行一次. 更新阶段和绘制阶段每次接收到用户输入时执行, 例如, 查看/渲染参数改变时.

在应用的一开始, 数据体背加载到cpu内存. 在某些情况下, 数据集还需要在打包下载到纹理内存前处理一下. 例如, 可以在这个阶段计算梯度或下采样. 一些数据处理也可以在应用外进行. 转换函数查找表和片段着色器一般也是在初始阶段创建的.

